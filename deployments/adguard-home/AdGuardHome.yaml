# see https://github.com/AdguardTeam/Adguardhome/wiki/Configuration
# HTTP web interface configuration.
# AdGuard listens on port 3000 inside the container, which you've mapped to 8000 on the host.
http:
  address: 0.0.0.0:3000
  pprof:
    port: 6060
    enabled: false

# Leave users empty for the initial setup. You will create your admin user
# through the web interface on the first run.
users: []

# UI settings.
language: en
theme: dark

# Core DNS server settings.
dns:
  # Listen on all available container interfaces.
  bind_hosts:
    - "0.0.0.0"
    - "::"
  port: 53
  # Upstream DNS servers. Using a mix of providers and protocols (DoH and DoT).
  # These will be queried simultaneously, and the first valid response is used.
  upstream_dns:
    - https://dns.quad9.net/dns-query
    - https://security.cloudflare-dns.com/dns-query
    - https://freedns.controld.com/p2 # ControlD Ads & Tracking
  upstream_mode: parallel # Queries all upstreams and uses the first response
  # DNS servers used to resolve the hostnames of your encrypted upstreams (e.g., dns.cloudflare.com).
  # Using IP addresses here is more reliable.
  bootstrap_dns: # do not format/indent this
  - "1.1.1.2" # Cloudflare Security
  - "9.9.9.9" # Quad9
  - "76.76.2.2" # ControlD Ads & Tracking
  # Fallback servers are used only when all primary upstreams fail.
  fallback_dns:
    - "1.0.0.2" # Cloudflare Security
    - "149.112.112.112" # Quad9
    - "76.76.10.2" # ControlD Ads & Tracking
  ratelimit: 0
  # Caching settings for faster responses on repeated queries.
  cache_enabled: true
  cache_size: 16777216 # 16 MB
  cache_ttl_min: 600 # 10 minutes
  cache_ttl_max: 86400 # 24 hours
  # For privacy, disable EDNS Client Subnet (prevents sending your IP subnet to upstream DNS).
  edns_client_subnet:
    custom_ip: ""
    enabled: false
    use_custom: false
  hostsfile_enabled: true
  pending_requests:
    enabled: true
  # Enable DNSSEC for an extra layer of security.
  enable_dnssec: true
  anonymize_client_ip: false

# Filtering, ad-blocking, and security settings.
filtering:
  # Master switch for all filtering.
  protection_enabled: true
  filtering_enabled: true
  # How AdGuard responds to blocked domains. 'nxdomain' is the standard.
  blocking_mode: nxdomain
  # Parental control is disabled by default. Enable it in the UI if needed.
  parental_enabled: false
  safe_search:
    enabled: false
    bing: false
    duckduckgo: false
    google: false
    pixabay: false
    yandex: false
    youtube: false
  # Block malicious and phishing domains using Safe Browsing.
  safebrowsing_enabled: false
  blocked_services:
    schedule:
      time_zone: Local
  safe_fs_patterns:
    - /opt/adguardhome/work/data/userfilters/*


# Logging and statistics settings.
querylog:
  enabled: true
  file_enabled: true
  ignored: []
  interval: 2160h
  size_memory: 1000

statistics:
  enabled: true
  ignored: []
  interval: 720h

filters:
  - name: Hagezi Pro
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/pro.txt
  - name: Hagezi Fake
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/fake.txt
  - name: Hagezi Popup Ads
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/popupads.txt
  - name: Hagezi Threat Intelligence Feeds - Medium version
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/tif.medium.txt
  - name: Hagezi Dynamic DNS blocking
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/dyndns.txt
  - name: Hagezi Gambling Medium
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/gambling.medium.txt
  - name: Samsung
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/native.samsung.txt
  - name: Microsoft
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/native.winoffice.txt
  - name: TikTok
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/native.tiktok.txt
  - name: Xiaomi
    enabled: true
    url: https://raw.githubusercontent.com/hagezi/dns-blocklists/main/adblock/native.xiaomi.txt

# TLS (DoH/DoT/DoQ) server settings.
# Since you are using Tailscale, all your DNS traffic is already encrypted within the WireGuard tunnel.
# Setting up your own TLS for DNS is complex and unnecessary for this use case.
tls:
  enabled: false

dhcp:
  dhcpv4: {}
  enabled: false

clients:
  persistent: []
  runtime_sources:
    arp: true
    dhcp: true
    hosts: true
    rdns: false
    whois: true

os:
  group: ""
  rlimit_nofile: 0
  user: ""

schema_version: 30
